@using Microsoft.AspNetCore.Identity
@using iUni_Workshop.Models

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager


<style>
    h2{
        margin-left: 10px;
    }

    .login1 a{
        color:#ff4000;
    }

    .login1 {
        text-decoration: none;
    }
     
</style>

@if (SignInManager.IsSignedIn(User))
{
    var user = await UserManager.GetUserAsync(User);
    try
    {
        var role = (await UserManager.GetRolesAsync(user)).AsEnumerable().First();
        <li>
            <a asp-area="" asp-controller="Dashboard" asp-action="Index" title="Manage">Hello @UserManager.GetUserName(User)!</a>
        </li>

        if (role == Roles.Administrator)
        {
            <a asp-area="" asp-controller="Administrator" asp-action="" title="Manage">Add School</a>
            <a asp-area="" asp-controller="Administrator" asp-action="" title="Manage">Add Fields</a>
            <a asp-area="" asp-controller="Administrator" asp-action="" title="Manage">Add Skill</a>
            <a asp-area="" asp-controller="Administrator" asp-action="" title="Manage">Send Message</a>
        }

        if (role == Roles.Employee)
        {
            <a asp-area="" asp-controller="Employee" asp-action="" title="Manage">MyCVs</a>
            <a asp-area="" asp-controller="Employee" asp-action="" title="Manage">EditPersonalInfo</a>
            <a asp-area="" asp-controller="Employee" asp-action="" title="Manage">MyInvitations</a>
        }

        if (role == Roles.Employer)
        {
            <a asp-area="" asp-controller="Employee" asp-action="" title="Manage">EditCompanyInfo</a>
            <a asp-area="" asp-controller="Employee" asp-action="" title="Manage">Job Profiles</a>
            <a asp-area="" asp-controller="Employee" asp-action="" title="Manage">Invitations</a>
        }
    }

    catch (Exception)
    {
        
    }
    
    <form asp-area="" asp-controller="Account" asp-action="Logout" method="post" id="logoutForm" class="navbar-right">
        <ul class="nav navbar-nav navbar-right">
            <li>
                <a asp-area="" asp-controller="Dashboard" asp-action="Index" title="Manage">Hello @UserManager.GetUserName(User)!</a>
            </li>
            <li>
                <button type="submit" class="btn btn-link navbar-btn navbar-link">Log out</button>
            </li>
        </ul>
    </form>
}
else
{
    <h2 style="margin-left: 10px; padding-top: 0px; text-align: right; padding-right: 5px;">
        <a asp-area="" asp-controller="Account" asp-action="Register" style="text-decoration: none;">Register</a>
        <a asp-area="" asp-controller="Account" asp-action="Login" style="text-decoration: none;">Log in</a>
    </h2>
    
}


